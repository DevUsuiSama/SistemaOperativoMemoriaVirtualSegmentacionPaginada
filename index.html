<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memoria Virtual - Sistema Operativo</title>
    <style>
        /* Variables CSS para colores acad√©micos */
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #2ecc71;
            --warning-color: #f39c12;
            --text-color: #333;
            --bg-color: #f9f9f9;
            --card-bg: #ffffff;
            --border-color: #ddd;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Modo oscuro */
        .dark-mode {
            --primary-color: #3498db;
            --secondary-color: #2980b9;
            --accent-color: #e74c3c;
            --light-color: #34495e;
            --dark-color: #2c3e50;
            --success-color: #27ae60;
            --warning-color: #d35400;
            --text-color: #ecf0f1;
            --bg-color: #1a1a2e;
            --card-bg: #16213e;
            --border-color: #34495e;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        /* Reset y estilos base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 0;
        }

        /* Estructura principal */
        .app {
            display: flex;
            min-height: 100vh;
        }

        /* Men√∫ hamburguesa */
        .menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 280px;
            height: 100%;
            background-color: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.1);
        }

        .menu--open {
            transform: translateX(0);
        }

        .menu__header {
            padding: 20px 0;
            border-bottom: 1px solid var(--dark-color);
            color: var(--light-color);
            margin-bottom: 20px;
        }

        .menu__title {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .menu__subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .menu__list {
            list-style: none;
            padding: 0;
        }

        .menu__item {
            border-bottom: 1px solid var(--dark-color);
            margin-bottom: 5px;
        }

        .menu__link {
            display: block;
            padding: 15px 20px;
            color: var(--light-color);
            text-decoration: none;
            transition: background-color 0.3s;
            border-radius: 5px;
        }

        .menu__link:hover {
            background-color: var(--dark-color);
        }

        .menu__link--active {
            background-color: var(--secondary-color);
            font-weight: bold;
        }

        /* Bot√≥n hamburguesa */
        .hamburger {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 30px;
            height: 24px;
            cursor: pointer;
            z-index: 1100;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background-color: var(--card-bg);
            padding: 10px;
            border-radius: 5px;
            box-shadow: var(--shadow);
        }

        .hamburger__line {
            height: 3px;
            width: 100%;
            background-color: var(--primary-color);
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .hamburger--open .hamburger__line:nth-child(1) {
            transform: translateY(10px) rotate(45deg);
        }

        .hamburger--open .hamburger__line:nth-child(2) {
            opacity: 0;
        }

        .hamburger--open .hamburger__line:nth-child(3) {
            transform: translateY(-10px) rotate(-45deg);
        }

        /* Contenido principal */
        .content {
            flex: 1;
            padding: 30px;
            transition: margin-left 0.3s ease;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content__title {
            color: var(--primary-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            font-size: 2rem;
        }

        .content__description {
            margin-bottom: 30px;
            font-size: 1.1rem;
            line-height: 1.8;
            padding: 15px;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        /* Bot√≥n modo oscuro/claro */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--card-bg);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
            z-index: 1000;
        }

        .theme-toggle__icon {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        /* Animaciones y visualizaciones */
        .animation {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 35px;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .animation__title {
            color: var(--secondary-color);
            margin-bottom: 20px;
            font-size: 1.5rem;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .animation__description {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .memory-visualization {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center;
            padding: 15px;
            background-color: var(--bg-color);
            border-radius: 8px;
        }

        .memory-visualization__section {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
        }

        .memory-visualization__title {
            margin-bottom: 10px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .memory-block {
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-weight: bold;
            transition: all 0.5s ease;
            position: relative;
            margin: 5px;
        }

        .memory-block--physical {
            background-color: var(--light-color);
            border: 2px solid var(--secondary-color);
            color: var(--dark-color);
        }

        .memory-block--virtual {
            background-color: var(--light-color);
            border: 2px dashed var(--accent-color);
            color: var(--dark-color);
        }

        .memory-block--disk {
            background-color: var(--light-color);
            border: 2px dotted var(--warning-color);
            color: var(--dark-color);
        }

        .memory-block--active {
            background-color: var(--secondary-color);
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(52, 152, 219, 0.7);
        }

        .memory-block--fault {
            background-color: var(--accent-color);
            color: white;
            animation: pulse 1s infinite;
        }

        .memory-block--mapped {
            background-color: var(--success-color);
            color: white;
        }

        .memory-block--segment {
            background-color: var(--warning-color);
            color: white;
            border: 2px solid var(--warning-color);
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .button {
            padding: 12px 20px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .button:hover {
            background-color: var(--primary-color);
            transform: translateY(-2px);
        }

        .button:active {
            transform: translateY(0);
        }

        .button--secondary {
            background-color: var(--warning-color);
        }

        .button--secondary:hover {
            background-color: #e67e22;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 25px 0;
            box-shadow: var(--shadow);
            border-radius: 8px;
            overflow: hidden;
        }

        .table th, .table td {
            border: 1px solid var(--border-color);
            padding: 12px 15px;
            text-align: center;
        }

        .table th {
            background-color: var(--primary-color);
            color: white;
            font-weight: bold;
        }

        .table tr:nth-child(even) {
            background-color: var(--light-color);
        }

        .table tr:hover {
            background-color: rgba(52, 152, 219, 0.1);
        }

        .comparison {
            display: flex;
            gap: 25px;
            margin-top: 25px;
        }

        .comparison__item {
            flex: 1;
            padding: 20px;
            border-radius: 10px;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            border: 1px solid var(--border-color);
        }

        .comparison__title {
            color: var(--primary-color);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
            font-size: 1.3rem;
        }

        .comparison__list {
            list-style-type: none;
        }

        .comparison__list li {
            padding: 8px 0;
            position: relative;
            padding-left: 25px;
            line-height: 1.5;
        }

        .comparison__list li:before {
            content: "‚Ä¢";
            color: var(--secondary-color);
            position: absolute;
            left: 0;
            font-size: 1.5rem;
        }

        /* Flechas para interacciones */
        .arrow {
            position: absolute;
            width: 100px;
            height: 2px;
            background-color: var(--accent-color);
            z-index: 10;
        }

        .arrow:before {
            content: '';
            position: absolute;
            right: -8px;
            top: -6px;
            width: 0;
            height: 0;
            border-left: 10px solid var(--accent-color);
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
        }

        .arrow--animated {
            animation: arrowFlow 2s infinite;
        }

        /* Animaciones */
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(231, 76, 60, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(231, 76, 60, 0); }
        }

        @keyframes highlight {
            0% { background-color: var(--success-color); }
            100% { background-color: var(--light-color); }
        }

        @keyframes arrowFlow {
            0% { opacity: 0; transform: translateX(-20px); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translateX(20px); }
        }

        .highlight {
            animation: highlight 2s ease;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .comparison {
                flex-direction: column;
            }
            
            .memory-block {
                width: 50px;
                height: 50px;
                font-size: 0.8rem;
            }
            
            .content {
                padding: 20px 15px;
            }
            
            .animation {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Men√∫ hamburguesa -->
        <nav class="menu" id="menu">
            <div class="menu__header">
                <h1 class="menu__title">Memoria Virtual</h1>
                <p class="menu__subtitle">Sistema Operativo</p>
            </div>
            <ul class="menu__list">
                <li class="menu__item"><a href="#memoria-virtual" class="menu__link menu__link--active">Memoria Virtual</a></li>
                <li class="menu__item"><a href="#tablas-paginas" class="menu__link">Tablas de P√°ginas</a></li>
                <li class="menu__item"><a href="#segmentacion-paginacion" class="menu__link">Segmentaci√≥n vs. Paginaci√≥n</a></li>
                <li class="menu__item"><a href="#segmentacion-paginada" class="menu__link">Segmentaci√≥n Paginada</a></li>
            </ul>
        </nav>

        <!-- Bot√≥n hamburguesa -->
        <div class="hamburger" id="hamburger">
            <span class="hamburger__line"></span>
            <span class="hamburger__line"></span>
            <span class="hamburger__line"></span>
        </div>

        <!-- Bot√≥n modo oscuro/claro -->
        <button class="theme-toggle" id="themeToggle">
            <span class="theme-toggle__icon">üåô</span>
        </button>

        <!-- Contenido principal -->
        <main class="content" id="content">
            <!-- Secci√≥n Memoria Virtual -->
            <section id="memoria-virtual" class="content__section">
                <h2 class="content__title">1. Memoria Virtual</h2>
                <p class="content__description">
                    La memoria virtual es una t√©cnica de gesti√≥n de memoria que permite ejecutar procesos cuyo tama√±o total excede la memoria f√≠sica disponible.
                    Esto se logra dividiendo la memoria en p√°ginas y utilizando almacenamiento secundario (como el disco duro) para guardar las p√°ginas que no caben en la memoria f√≠sica.
                </p>

                <div class="animation">
                    <h3 class="animation__title">Simulaci√≥n: Memoria Virtual</h3>
                    <p class="animation__description">Observa c√≥mo funciona la memoria virtual cuando un proceso necesita m√°s memoria de la disponible f√≠sicamente. Las flechas indican el movimiento de p√°ginas entre memoria virtual, f√≠sica y disco.</p>
                    
                    <div class="memory-visualization" id="virtual-memory-viz">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>
                    
                    <div class="controls">
                        <button class="button" id="start-virtual">Iniciar Simulaci√≥n</button>
                        <button class="button button--secondary" id="reset-virtual">Reiniciar</button>
                        <button class="button" id="step-virtual">Paso a Paso</button>
                    </div>
                </div>

                <div class="animation">
                    <h3 class="animation__title">¬øQu√© pasar√≠a sin memoria virtual?</h3>
                    <p class="animation__description">Sin memoria virtual, los sistemas modernos enfrentar√≠an problemas graves:</p>
                    <ul class="comparison__list">
                        <li>Los programas estar√≠an limitados al tama√±o de la memoria f√≠sica disponible</li>
                        <li>Ser√≠a imposible ejecutar m√∫ltiples programas grandes simult√°neamente</li>
                        <li>La fragmentaci√≥n de memoria ser√≠a un problema constante</li>
                        <li>Los desarrolladores tendr√≠an que gestionar manualmente la memoria</li>
                    </ul>
                </div>
            </section>

            <!-- Secci√≥n Tablas de P√°ginas -->
            <section id="tablas-paginas" class="content__section" style="display: none;">
                <h2 class="content__title">2. Tablas de P√°ginas</h2>
                <p class="content__description">
                    La tabla de p√°ginas es la estructura de datos que el sistema operativo utiliza para almacenar el mapeo entre direcciones virtuales y f√≠sicas.
                    Cada proceso tiene su propia tabla de p√°ginas, que se utiliza durante la traducci√≥n de direcciones.
                </p>

                <div class="animation">
                    <h3 class="animation__title">Traducci√≥n de Direcciones</h3>
                    <p class="animation__description">La MMU (Memory Management Unit) utiliza la tabla de p√°ginas para convertir direcciones virtuales en f√≠sicas. Observa c√≥mo se realiza esta traducci√≥n:</p>
                    
                    <div class="memory-visualization" id="page-table-viz">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>
                    
                    <div class="table">
                        <table>
                            <thead>
                                <tr>
                                    <th>P√°gina Virtual</th>
                                    <th>Marco F√≠sico</th>
                                    <th>Bit de Presencia</th>
                                    <th>Bit de Modificaci√≥n</th>
                                    <th>Bits de Protecci√≥n</th>
                                </tr>
                            </thead>
                            <tbody id="page-table-body">
                                <!-- Se generar√° din√°micamente con JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="controls">
                        <button class="button" id="access-memory">Acceder a Memoria</button>
                        <button class="button" id="cause-page-fault">Generar Page Fault</button>
                        <button class="button" id="show-translation">Mostrar Traducci√≥n</button>
                    </div>
                </div>

                <div class="animation">
                    <h3 class="animation__title">Informaci√≥n en una Entrada de Tabla de P√°ginas (PTE)</h3>
                    <p class="animation__description">Cada entrada en la tabla de p√°ginas contiene informaci√≥n crucial:</p>
                    <ul class="comparison__list">
                        <li><strong>Bit de presencia/v√°lido:</strong> Indica si la p√°gina est√° en memoria f√≠sica</li>
                        <li><strong>Marco f√≠sico:</strong> Direcci√≥n del marco de p√°gina en memoria f√≠sica</li>
                        <li><strong>Bits de protecci√≥n:</strong> Permisos de lectura, escritura y ejecuci√≥n</li>
                        <li><strong>Bit de modificaci√≥n (dirty):</strong> Indica si la p√°gina ha sido modificada</li>
                        <li><strong>Bit de referencia:</strong> Utilizado para algoritmos de reemplazo</li>
                    </ul>
                </div>
            </section>

            <!-- Secci√≥n Segmentaci√≥n vs. Paginaci√≥n -->
            <section id="segmentacion-paginacion" class="content__section" style="display: none;">
                <h2 class="content__title">3. Segmentaci√≥n vs. Paginaci√≥n</h2>
                <p class="content__description">
                    Tanto la segmentaci√≥n como la paginaci√≥n son t√©cnicas de gesti√≥n de memoria, pero con enfoques diferentes.
                    Mientras que la paginaci√≥n divide la memoria en unidades de tama√±o fijo (p√°ginas), la segmentaci√≥n la divide en unidades l√≥gicas de tama√±o variable (segmentos).
                </p>

                <div class="comparison">
                    <div class="comparison__item">
                        <h3 class="comparison__title">Segmentaci√≥n</h3>
                        <ul class="comparison__list">
                            <li><strong>Ventajas:</strong>
                                <ul class="comparison__list">
                                    <li>Refleja la estructura l√≥gica del programa</li>
                                    <li>Facilita la compartici√≥n y protecci√≥n</li>
                                    <li>Segmentos de tama√±o variable</li>
                                </ul>
                            </li>
                            <li><strong>Desventajas:</strong>
                                <ul class="comparison__list">
                                    <li>Fragmentaci√≥n externa</li>
                                    <li>Complejidad en la gesti√≥n de memoria</li>
                                    <li>Dificultad para encontrar espacio contiguo</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="comparison__item">
                        <h3 class="comparison__title">Paginaci√≥n</h3>
                        <ul class="comparison__list">
                            <li><strong>Ventajas:</strong>
                                <ul class="comparison__list">
                                    <li>No hay fragmentaci√≥n externa</li>
                                    <li>M√°s simple de implementar</li>
                                    <li>Tama√±o de p√°gina fijo</li>
                                </ul>
                            </li>
                            <li><strong>Desventajas:</strong>
                                <ul class="comparison__list">
                                    <li>No refleja la estructura l√≥gica</li>
                                    <li>Overhead por tablas de p√°ginas</li>
                                    <li>Fragmentaci√≥n interna</li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="animation">
                    <h3 class="animation__title">Visualizaci√≥n Comparativa</h3>
                    <p class="animation__description">Observa las diferencias entre segmentaci√≥n y paginaci√≥n en la gesti√≥n de memoria:</p>
                    
                    <div class="memory-visualization" id="segmentation-viz">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>
                    
                    <div class="memory-visualization" id="pagination-viz">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>
                    
                    <div class="controls">
                        <button class="button" id="show-segmentation">Mostrar Segmentaci√≥n</button>
                        <button class="button" id="show-pagination">Mostrar Paginaci√≥n</button>
                        <button class="button" id="compare-both">Comparar Ambos</button>
                    </div>
                </div>
            </section>

            <!-- Secci√≥n Segmentaci√≥n Paginada -->
            <section id="segmentacion-paginada" class="content__section" style="display: none;">
                <h2 class="content__title">4. Segmentaci√≥n Paginada</h2>
                <p class="content__description">
                    Los sistemas modernos como x86-64 utilizan un modelo h√≠brido que combina segmentaci√≥n y paginaci√≥n.
                    Aunque la paginaci√≥n es eficiente, la segmentaci√≥n aporta beneficios residuales importantes.
                </p>

                <div class="animation">
                    <h3 class="animation__title">Modelo H√≠brido: Segmentaci√≥n Paginada</h3>
                    <p class="animation__description">En este modelo, la memoria se divide primero en segmentos l√≥gicos, y luego cada segmento se divide en p√°ginas. Observa c√≥mo funciona:</p>
                    
                    <div class="memory-visualization" id="hybrid-viz">
                        <!-- Se generar√° din√°micamente con JavaScript -->
                    </div>
                    
                    <div class="controls">
                        <button class="button" id="show-hybrid">Mostrar Modelo H√≠brido</button>
                        <button class="button" id="step-hybrid">Paso a Paso</button>
                    </div>
                </div>

                <div class="animation">
                    <h3 class="animation__title">Beneficios de la Segmentaci√≥n en Sistemas Modernos</h3>
                    <p class="animation__description">Aunque la paginaci√≥n es eficiente, la segmentaci√≥n aporta:</p>
                    <ul class="comparison__list">
                        <li><strong>Protecci√≥n y aislamiento:</strong> Los segmentos permiten definir permisos espec√≠ficos para diferentes partes del programa</li>
                        <li><strong>Compatibilidad:</strong> Mantener segmentaci√≥n permite compatibilidad con software antiguo</li>
                        <li><strong>Gesti√≥n de tipos:</strong> Los segmentos pueden representar diferentes tipos de datos (c√≥digo, datos, pila)</li>
                        <li><strong>Compartici√≥n eficiente:</strong> Es m√°s f√°cil compartir segmentos completos entre procesos</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Elementos del DOM
        const menu = document.getElementById('menu');
        const hamburger = document.getElementById('hamburger');
        const themeToggle = document.getElementById('themeToggle');
        const contentSections = document.querySelectorAll('.content__section');
        const menuLinks = document.querySelectorAll('.menu__link');

        // Alternar men√∫ hamburguesa
        hamburger.addEventListener('click', () => {
            menu.classList.toggle('menu--open');
            hamburger.classList.toggle('hamburger--open');
        });

        // Alternar modo oscuro/claro
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const icon = themeToggle.querySelector('.theme-toggle__icon');
            icon.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        });

        // Navegaci√≥n entre secciones
        menuLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                
                // Obtener el ID de la secci√≥n objetivo
                const targetId = link.getAttribute('href').substring(1);
                
                // Ocultar todas las secciones
                contentSections.forEach(section => {
                    section.style.display = 'none';
                });
                
                // Mostrar la secci√≥n objetivo
                document.getElementById(targetId).style.display = 'block';
                
                // Actualizar enlace activo
                menuLinks.forEach(l => l.classList.remove('menu__link--active'));
                link.classList.add('menu__link--active');
                
                // Cerrar men√∫ en dispositivos m√≥viles
                if (window.innerWidth <= 768) {
                    menu.classList.remove('menu--open');
                    hamburger.classList.remove('hamburger--open');
                }
            });
        });

        // Simulaci√≥n de Memoria Virtual
        const virtualMemoryViz = document.getElementById('virtual-memory-viz');
        const startVirtualBtn = document.getElementById('start-virtual');
        const resetVirtualBtn = document.getElementById('reset-virtual');
        const stepVirtualBtn = document.getElementById('step-virtual');

        function initVirtualMemoryVisualization() {
            virtualMemoryViz.innerHTML = '';
            
            // Crear contenedor para memoria f√≠sica
            const physicalContainer = document.createElement('div');
            physicalContainer.className = 'memory-visualization__section';
            physicalContainer.innerHTML = '<div class="memory-visualization__title">Memoria F√≠sica (4 marcos)</div>';
            
            const physicalMemory = document.createElement('div');
            physicalMemory.style.display = 'flex';
            physicalMemory.style.flexWrap = 'wrap';
            physicalMemory.style.justifyContent = 'center';
            
            for (let i = 0; i < 4; i++) {
                const block = document.createElement('div');
                block.className = 'memory-block memory-block--physical';
                block.textContent = `M${i}`;
                block.id = `physical-${i}`;
                physicalMemory.appendChild(block);
            }
            
            physicalContainer.appendChild(physicalMemory);
            virtualMemoryViz.appendChild(physicalContainer);
            
            // Crear contenedor para memoria virtual
            const virtualContainer = document.createElement('div');
            virtualContainer.className = 'memory-visualization__section';
            virtualContainer.innerHTML = '<div class="memory-visualization__title">Memoria Virtual (8 p√°ginas)</div>';
            
            const virtualMemory = document.createElement('div');
            virtualMemory.style.display = 'flex';
            virtualMemory.style.flexWrap = 'wrap';
            virtualMemory.style.justifyContent = 'center';
            
            for (let i = 0; i < 8; i++) {
                const block = document.createElement('div');
                block.className = 'memory-block memory-block--virtual';
                block.textContent = `V${i}`;
                block.id = `virtual-${i}`;
                virtualMemory.appendChild(block);
            }
            
            virtualContainer.appendChild(virtualMemory);
            virtualMemoryViz.appendChild(virtualContainer);
            
            // Crear contenedor para disco
            const diskContainer = document.createElement('div');
            diskContainer.className = 'memory-visualization__section';
            diskContainer.innerHTML = '<div class="memory-visualization__title">Disco (Almacenamiento Secundario)</div>';
            
            const disk = document.createElement('div');
            disk.style.display = 'flex';
            disk.style.flexWrap = 'wrap';
            disk.style.justifyContent = 'center';
            
            for (let i = 0; i < 8; i++) {
                const block = document.createElement('div');
                block.className = 'memory-block memory-block--disk';
                block.textContent = `P${i}`;
                block.id = `disk-${i}`;
                disk.appendChild(block);
            }
            
            diskContainer.appendChild(disk);
            virtualMemoryViz.appendChild(diskContainer);
        }

        function createArrow(fromId, toId, color) {
            const fromElement = document.getElementById(fromId);
            const toElement = document.getElementById(toId);
            
            if (!fromElement || !toElement) return null;
            
            const fromRect = fromElement.getBoundingClientRect();
            const toRect = toElement.getBoundingClientRect();
            const containerRect = virtualMemoryViz.getBoundingClientRect();
            
            const arrow = document.createElement('div');
            arrow.className = 'arrow arrow--animated';
            arrow.style.backgroundColor = color || '#e74c3c';
            
            // Calcular posici√≥n y rotaci√≥n
            const fromX = fromRect.left + fromRect.width/2 - containerRect.left;
            const fromY = fromRect.top + fromRect.height/2 - containerRect.top;
            const toX = toRect.left + toRect.width/2 - containerRect.left;
            const toY = toRect.top + toRect.height/2 - containerRect.top;
            
            const length = Math.sqrt(Math.pow(toX - fromX, 2) + Math.pow(toY - fromY, 2));
            const angle = Math.atan2(toY - fromY, toX - fromX) * 180 / Math.PI;
            
            arrow.style.width = `${length}px`;
            arrow.style.left = `${fromX}px`;
            arrow.style.top = `${fromY}px`;
            arrow.style.transform = `rotate(${angle}deg)`;
            arrow.style.transformOrigin = '0 0';
            
            virtualMemoryViz.appendChild(arrow);
            return arrow;
        }

        function simulateVirtualMemory() {
            // Limpiar flechas anteriores
            document.querySelectorAll('.arrow').forEach(arrow => arrow.remove());
            
            // Simular acceso a p√°ginas virtuales
            const accessOrder = [0, 1, 2, 3, 4, 5, 0, 1, 6, 7, 2, 3];
            let step = 0;
            
            const interval = setInterval(() => {
                if (step >= accessOrder.length) {
                    clearInterval(interval);
                    return;
                }
                
                const page = accessOrder[step];
                const virtualBlock = document.getElementById(`virtual-${page}`);
                const diskBlock = document.getElementById(`disk-${page}`);
                
                // Resaltar la p√°gina virtual accedida
                virtualBlock.classList.add('memory-block--active');
                diskBlock.classList.add('memory-block--active');
                
                // Buscar un marco f√≠sico disponible
                let physicalFrame = -1;
                for (let i = 0; i < 4; i++) {
                    const physicalBlock = document.getElementById(`physical-${i}`);
                    if (!physicalBlock.classList.contains('memory-block--mapped')) {
                        physicalFrame = i;
                        break;
                    }
                }
                
                // Si no hay marco disponible, simular reemplazo (FIFO)
                if (physicalFrame === -1) {
                    // En una simulaci√≥n real, aqu√≠ se implementar√≠a un algoritmo de reemplazo
                    physicalFrame = step % 4;
                    const oldPhysicalBlock = document.getElementById(`physical-${physicalFrame}`);
                    oldPhysicalBlock.classList.remove('memory-block--mapped');
                    oldPhysicalBlock.textContent = `M${physicalFrame}`;
                    
                    // Crear flecha desde memoria f√≠sica a disco (swap out)
                    createArrow(`physical-${physicalFrame}`, `disk-${accessOrder[step-4]}`, '#f39c12');
                }
                
                // Crear flecha desde disco a memoria f√≠sica (swap in)
                createArrow(`disk-${page}`, `physical-${physicalFrame}`, '#2ecc71');
                
                // Mapear la p√°gina virtual al marco f√≠sico
                const physicalBlock = document.getElementById(`physical-${physicalFrame}`);
                physicalBlock.classList.add('memory-block--mapped');
                physicalBlock.textContent = `V${page}`;
                
                // Quitar resaltado despu√©s de un tiempo
                setTimeout(() => {
                    virtualBlock.classList.remove('memory-block--active');
                    diskBlock.classList.remove('memory-block--active');
                    
                    // Limpiar flechas despu√©s de un tiempo
                    document.querySelectorAll('.arrow').forEach(arrow => {
                        if (arrow.parentNode) arrow.parentNode.removeChild(arrow);
                    });
                }, 1000);
                
                step++;
            }, 1500);
        }

        startVirtualBtn.addEventListener('click', simulateVirtualMemory);
        resetVirtualBtn.addEventListener('click', initVirtualMemoryVisualization);
        stepVirtualBtn.addEventListener('click', () => {
            // Implementaci√≥n simplificada del modo paso a paso
            alert('Modo paso a paso: En una implementaci√≥n completa, esto permitir√≠a avanzar manualmente por cada paso de la simulaci√≥n.');
        });

        // Inicializar visualizaciones
        initVirtualMemoryVisualization();

        // Simulaci√≥n de Tabla de P√°ginas
        const pageTableBody = document.getElementById('page-table-body');
        const accessMemoryBtn = document.getElementById('access-memory');
        const causePageFaultBtn = document.getElementById('cause-page-fault');
        const showTranslationBtn = document.getElementById('show-translation');
        
        function initPageTable() {
            pageTableBody.innerHTML = '';
            
            // Crear entradas de tabla de p√°ginas
            const pageTableData = [
                { virtual: 0, physical: 2, present: 1, modified: 0, protection: 'RW' },
                { virtual: 1, physical: 0, present: 1, modified: 1, protection: 'RW' },
                { virtual: 2, physical: -1, present: 0, modified: 0, protection: 'R' },
                { virtual: 3, physical: 1, present: 1, modified: 0, protection: 'RX' },
                { virtual: 4, physical: -1, present: 0, modified: 0, protection: 'RW' },
                { virtual: 5, physical: 3, present: 1, modified: 0, protection: 'R' },
            ];
            
            pageTableData.forEach(entry => {
                const row = document.createElement('tr');
                row.id = `page-table-row-${entry.virtual}`;
                
                row.innerHTML = `
                    <td>${entry.virtual}</td>
                    <td>${entry.physical >= 0 ? entry.physical : '-'}</td>
                    <td>${entry.present ? 'S√≠' : 'No'}</td>
                    <td>${entry.modified ? 'S√≠' : 'No'}</td>
                    <td>${entry.protection}</td>
                `;
                
                pageTableBody.appendChild(row);
            });
        }
        
        accessMemoryBtn.addEventListener('click', () => {
            // Simular acceso a memoria
            const randomPage = Math.floor(Math.random() * 6);
            const row = document.getElementById(`page-table-row-${randomPage}`);
            
            row.classList.add('highlight');
            setTimeout(() => {
                row.classList.remove('highlight');
            }, 2000);
        });
        
        causePageFaultBtn.addEventListener('click', () => {
            // Simular page fault
            const faultPages = [2, 4]; // P√°ginas que no est√°n en memoria
            const randomFaultPage = faultPages[Math.floor(Math.random() * faultPages.length)];
            const row = document.getElementById(`page-table-row-${randomFaultPage}`);
            
            row.classList.add('memory-block--fault');
            setTimeout(() => {
                row.classList.remove('memory-block--fault');
            }, 2000);
        });
        
        showTranslationBtn.addEventListener('click', () => {
            // Implementaci√≥n simplificada de la traducci√≥n
            alert('Proceso de traducci√≥n: En una implementaci√≥n completa, esto mostrar√≠a visualmente c√≥mo una direcci√≥n virtual se divide en n√∫mero de p√°gina y desplazamiento, y c√≥mo se traduce a una direcci√≥n f√≠sica.');
        });
        
        initPageTable();

        // Inicializar otras visualizaciones (simplificadas por brevedad)
        // En una implementaci√≥n completa, se a√±adir√≠an todas las visualizaciones
    </script>
</body>
</html>